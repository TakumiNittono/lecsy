# lecsy 動作テストチェックリスト

## 📋 テスト環境

- **デバイス**: [ ] 実機 / [ ] シミュレータ
- **iOS バージョン**: __________
- **アプリ バージョン**: __________
- **テスト日時**: __________

---

## ✅ Phase 1: MVP 機能テスト

### 1. 録音機能

#### 1-1. マイク権限
- [ ] 初回起動時にマイク権限リクエストが表示される
- [ ] 権限を許可した場合、録音が開始できる
- [ ] 権限を拒否した場合、適切なエラーメッセージが表示される
- [ ] 設定アプリから権限を変更できる

#### 1-2. 録音開始・停止
- [ ] 録音ボタンをタップすると録音が開始される
- [ ] 録音中はストップウォッチが正しく動作する
- [ ] 録音中は停止ボタンが表示される
- [ ] 停止ボタンをタップすると録音が停止される
- [ ] 録音ファイルが正しく保存される

#### 1-3. Live Activities
- [ ] 録音開始時にLive Activityが表示される
- [ ] ロック画面で録音状態が表示される
- [ ] Dynamic Island（対応デバイスのみ）で録音状態が表示される
- [ ] 録音停止時にLive Activityが終了する

#### 1-4. バックグラウンド録音
- [ ] アプリをバックグラウンドにしても録音が継続する
- [ ] ロック画面でも録音が継続する
- [ ] 録音時間が正しく記録される

---

### 2. 文字起こし機能

#### 2-1. モデル読み込み
- [ ] 初回文字起こし時にモデルが自動ダウンロードされる
- [ ] モデルダウンロードの進捗が表示される
- [ ] モデル読み込み後に文字起こしが開始される

#### 2-2. 文字起こし実行
- [ ] 録音停止後に自動的に文字起こしが開始される
- [ ] 文字起こしの進捗が表示される
- [ ] 文字起こしが完了するとテキストが保存される
- [ ] 文字起こし結果が正しく表示される

#### 2-3. 言語設定
- [ ] 設定画面で言語を変更できる（自動/日本語/英語）
- [ ] 言語設定が保存される
- [ ] 設定した言語で文字起こしが実行される

#### 2-4. エラーハンドリング
- [ ] 文字起こしに失敗した場合、エラー状態が表示される
- [ ] エラー後に再試行できる

---

### 3. データ管理

#### 3-1. 講義一覧
- [ ] LibraryViewに録音した講義が表示される
- [ ] 講義のタイトル、日時、時間が正しく表示される
- [ ] 文字起こし状態が正しく表示される（未処理/処理中/完了/エラー）

#### 3-2. 検索機能
- [ ] 検索バーで講義を検索できる
- [ ] タイトルで検索できる
- [ ] 文字起こしテキストで検索できる

#### 3-3. 講義詳細
- [ ] 講義をタップすると詳細画面が表示される
- [ ] タイトルを編集できる
- [ ] 文字起こしテキストが表示される
- [ ] コピーボタンでテキストをコピーできる

#### 3-4. 削除機能
- [ ] スワイプで講義を削除できる
- [ ] 削除時に確認ダイアログが表示される（実装されている場合）
- [ ] 削除後、音声ファイルも削除される

---

### 4. 認証機能

#### 4-1. Google ログイン
- [ ] 設定画面から「Sign In」をタップできる
- [ ] Google ログインボタンが表示される
- [ ] Google ログインが正常に完了する
- [ ] ログイン後、ユーザー情報が表示される

#### 4-2. Apple ログイン
- [ ] Apple ログインボタンが表示される
- [ ] Apple ログインが正常に完了する
- [ ] ログイン後、ユーザー情報が表示される

#### 4-3. ログアウト
- [ ] ログアウトボタンが表示される
- [ ] ログアウトが正常に完了する
- [ ] ログアウト後、認証が必要な機能が無効になる

#### 4-4. セッション管理
- [ ] アプリ再起動後もログイン状態が維持される
- [ ] トークンが期限切れの場合、自動的にリフレッシュされる

---

### 5. Web同期機能

#### 5-1. Save to Web
- [ ] ログイン済みの場合、「Save to Web」ボタンが表示される
- [ ] 「Save to Web」をタップすると保存が開始される
- [ ] 保存中はローディング表示が表示される
- [ ] 保存成功後、「Saved to Web」状態が表示される
- [ ] Webアプリで保存された講義が確認できる

#### 5-2. エラーハンドリング
- [ ] ログインしていない場合、適切なメッセージが表示される
- [ ] ネットワークエラー時にエラーメッセージが表示される
- [ ] サーバーエラー時にエラーメッセージが表示される

#### 5-3. 再試行機能
- [ ] 保存に失敗した講義が「Pending Uploads」に表示される
- [ ] 「Retry Uploads」ボタンで再試行できる
- [ ] 複数の保留中のアップロードを一括で再試行できる

---

## 🔄 統合テスト: 録音→文字起こし→Web保存フロー

### テストケース 1: 正常フロー
1. [ ] アプリを起動
2. [ ] RecordViewで録音を開始（10秒以上）
3. [ ] 録音を停止
4. [ ] 自動的に文字起こしが開始されることを確認
5. [ ] 文字起こしが完了するまで待機
6. [ ] LibraryViewで講義が表示されることを確認
7. [ ] 講義詳細画面を開く
8. [ ] 文字起こしテキストが表示されることを確認
9. [ ] 設定画面でログイン（GoogleまたはApple）
10. [ ] 講義詳細画面に戻る
11. [ ] 「Save to Web」ボタンをタップ
12. [ ] 保存が成功することを確認
13. [ ] Webアプリで保存された講義を確認

### テストケース 2: エラーハンドリング
1. [ ] ログインせずに「Save to Web」を試行
   - [ ] 適切なエラーメッセージが表示される
2. [ ] ネットワークを切断して「Save to Web」を試行
   - [ ] ネットワークエラーメッセージが表示される
3. [ ] 文字起こしが失敗した講義で「Save to Web」を試行
   - [ ] 適切なエラーメッセージが表示される

### テストケース 3: バックグラウンド動作
1. [ ] 録音を開始
2. [ ] アプリをバックグラウンドに移動
3. [ ] ロック画面で録音状態を確認
4. [ ] アプリを再び開く
5. [ ] 録音が継続していることを確認
6. [ ] 録音を停止
7. [ ] 文字起こしが開始されることを確認

---

## 🐛 既知の問題・改善点

### 発見した問題
1. __________
2. __________
3. __________

### 改善提案
1. __________
2. __________
3. __________

---

## 📝 テスト結果サマリー

- **総テスト項目数**: __________
- **成功**: __________
- **失敗**: __________
- **スキップ**: __________
- **成功率**: __________%

### 重大な問題
- [ ] なし
- [ ] あり（上記「既知の問題」に記載）

### リリース可否
- [ ] リリース可能
- [ ] 修正が必要
- [ ] 追加テストが必要

---

**テスト実施者**: __________  
**承認者**: __________  
**日付**: __________
